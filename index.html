<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>๐๐จ ALENCAR FRETES</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="style.css?v=10" />
</head>
<body>

<div class="header-top">
    <div class="logo-container"><img src="logo-cowboy-motofrete.png" alt="Logo Alencar Fretes" onerror="this.style.display='none'"></div>
    <div class="header-title"><h1>ALENCAR FRETES</h1></div>
</div>

<div class="container">
    <div class="row-endereco-num">
        <div><label>๐ DATA DA ENTREGA</label><input type="date" id="data_entrega"></div>
        <div><label>โฐ HORรRIO</label><input type="time" id="hora_entrega"></div>
    </div>
    
    <div><label>๐ค NOME DO CLIENTE</label><input type="text" id="nome_cliente" placeholder="Nome completo"></div>
    
    <div class="box-destaque">
        <label style="text-align: center; font-size: 0.9em;">๐ COMO DESEJA PESQUISAR O ENDEREรO?</label>
        <div class="tipo-busca">
            <button class="btn-selecao" id="btn-por-cep" onclick="selecionarBusca('cep')">Por CEP</button>
            <button class="btn-selecao" id="btn-por-rua" onclick="selecionarBusca('rua')">Nome da Rua</button>
        </div>
    </div>

    <div id="campo-cep" style="display: none;">
        <div class="row-endereco-num">
            <div><label>๐ฎ CEP</label><input type="text" id="cep" placeholder="00000-000" onblur="buscarCep()"></div>
            <div><label>Nยบ</label><input type="text" id="num_residencia_cep" placeholder="Ex: 123"></div>
        </div>
        <div><label>๐ RUA</label><input type="text" id="rua_pelo_cep" placeholder="A rua aparecerรก aqui..." readonly></div>
    </div>

    <div id="campo-rua" style="display: none;">
        <div class="row-endereco-num">
            <div><label>๐ RUA OU AVENIDA E BAIRRO</label><input type="text" id="destino" placeholder="Ex: Av joรฃo Dias"></div>
            <div><label>Nยบ</label><input type="text" id="num_residencia" placeholder="Ex: 123"></div>
        </div>
    </div>

    <div><label>๐ฉ PONTO DE REFERรNCIA (Opcional)</label><input type="text" id="ponto_referencia" placeholder="Ex: Estadio do Sรฃo Paulo..."></div>
    
    <div class="botoes-acao">
        <button class="btn-3d-green" id="btn-calcular" onclick="validarExpediente()">๐๏ธ CALCULAR O FRETE</button>
        <button class="btn-clear" onclick="limpar()">๐งน Limpar Campos</button>
    </div>

    <div id="campo-resumo" style="display: none;">
        <h3 class="titulo-neon">RESUMO DO PEDIDO</h3>
        
        <div class="resultado-grid">
            <div class="card-info-3d">
                <label>DISTรNCIA</label>
                <span id="distancia">0.00 <small style="font-size: 0.5em;">KM</small></span>
            </div>
            <div class="card-info-3d">
                <label>VALOR TOTAL</label>
                <span id="valor" class="valor-destaque">R$ 0,00</span>
            </div>
        </div>
        
        <div class="bairro-tempo-display">
            <div class="info-item">
                <span class="info-text-label">๐๏ธ Bairro de Destino</span>
                <span class="info-value-neon" id="res-bairro">---</span>
            </div>
            <div class="info-item">
                <span class="info-text-label">โฑ๏ธ Tempo de Viagem</span>
                <span class="info-value-neon" id="res-tempo">---</span>
            </div>
        </div>
        
        <div id="aviso-taxa">โ๏ธ TAXA MรNIMA APLICADA โ</div>

        <div id="mapa-container" style="margin-top: 20px; border-radius: 15px; overflow: hidden; border: 2px solid var(--azul-3d); box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);">
            <div id="map"></div>
        </div>
    </div>

    <div class="box-destaque" id="sec-tipo-local" style="display: none; margin-top: 15px;">
        <label style="text-align: center;">๐ ONDE SERร? ๐ข</label>
        <div class="tipo-residencia">
            <button class="btn-selecao" id="btn-casa" onclick="selecionarTipo('casa')">๐ CASA</button>
            <button class="btn-selecao" id="btn-apto" onclick="selecionarTipo('apto')">๐ข APTO</button>
        </div>
        
        <div id="dados-apto" style="display: none; margin-top: 15px;">
            <div class="row-endereco-num">
                <div><label>BLOCO</label><input type="text" id="bloco" placeholder="Ex: B"></div>
                <div><label>APTO</label><input type="text" id="apto" placeholder="Ex: 101"></div>
            </div>
        </div>

        <button class="btn-whatsapp-3d" onclick="prepararEnvio()" style="margin-top: 20px;">๐ฑ ENVIAR PEDIDO P/ WHATSAPP</button>
    </div>
</div>

<div id="modalExpediente" class="modal-overlay">
    <div class="msg-box">
        <h2 style="color: #f1c40f;">โ๏ธ ATENรรO</h2>
        <p>A solicitaรงรฃo serรก enviada para o WhatsApp do Lucas para anรกlise de disponibilidade.</p>
        <button class="btn-3d-green" onclick="continuarCalculo()">โ OK, CONTINUAR</button>
        <button class="btn-voltar" onclick="fecharModalExpediente()">CANCELAR</button>
    </div>
</div>

<div id="avisoLucas" class="modal-overlay">
    <div class="msg-box">
        <h2 style="color: var(--verde-frete);">TUDO CERTO!</h2>
        <p>Deseja enviar os dados do pedido por WhatsApp?</p>
        <button class="btn-whatsapp-3d" onclick="finalizarEnvio()">โ SIM, ENVIAR AGORA</button>
        <button class="btn-voltar" onclick="fecharModal()">VOLTAR</button>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
<script src="script.js?v=10"></script>
</body>
</html>
