<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALENCAR FRETES</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="style.css?v=7" />
</head>
<body>

<div class="header-top">
    <div class="logo-container"><img src="logo-cowboy-motofrete.png" alt="Logo Alencar Fretes" onerror="this.style.display='none'"></div>
    <div class="header-title"><h1>ALENCAR FRETES</h1></div>
</div>

<div id="map"></div>

<div class="container">
    <div id="sec-passo1" class="box-section">
        <div class="row-endereco-num">
            <div><label>üìÖ DATA DA ENTREGA</label><input type="date" id="data_entrega"></div>
            <div><label>‚è∞ HOR√ÅRIO</label><input type="time" id="hora_entrega"></div>
        </div>
        <div style="margin-top: 15px;">
            <label>üë§ NOME DO CLIENTE</label>
            <input type="text" id="nome_cliente" placeholder="Digite o nome completo">
        </div>
    </div>
    
    <div id="sec-passo2" class="box-section" style="display: none;">
        <label style="text-align: center;">üìç COMO DESEJA INFORMAR O ENDERE√áO?</label>
        <div class="tipo-busca">
            <button class="btn-selecao" id="btn-por-cep" onclick="selecionarBusca('cep')">Por CEP</button>
            <button class="btn-selecao" id="btn-por-rua" onclick="selecionarBusca('rua')">Nome da Rua</button>
        </div>
    </div>

    <div id="sec-passo3" class="box-section" style="display: none;">
        <div id="campo-cep" style="display: none;">
            <div class="row-endereco-num">
                <div><label>üìÆ CEP</label><input type="text" id="cep" placeholder="00000-000" onblur="buscarCep()"></div>
                <div><label>N¬∫</label><input type="text" id="num_residencia_cep" placeholder="Ex: 123" oninput="liberarCalculo()"></div>
            </div>
            <div style="margin-top: 15px;"><label>üìç RUA</label><input type="text" id="rua_pelo_cep" placeholder="A rua aparecer√° aqui..." readonly></div>
        </div>

        <div id="campo-rua" style="display: none;">
            <div class="row-endereco-num">
                <div><label>üìç RUA OU AVENIDA</label><input type="text" id="destino" placeholder="Ex: Av Paulista" oninput="liberarCalculo()"></div>
                <div><label>N¬∫</label><input type="text" id="num_residencia" placeholder="Ex: 123" oninput="liberarCalculo()"></div>
            </div>
        </div>
    </div>

    <div id="sec-passo4" class="box-section" style="display: none;">
        <label>üö© PONTO DE REFER√äNCIA (Opcional)</label>
        <input type="text" id="ponto_referencia" placeholder="Ex: Pr√≥ximo ao mercado...">
        
        <div class="botoes-acao" style="margin-top: 15px;">
            <button class="btn-primary" id="btn-calcular" onclick="validarExpediente()">üöÄ CALCULAR O FRETE</button>
            <button class="btn-clear" onclick="limpar()">üßπ Reiniciar Pedido</button>
        </div>
    </div>

    <div id="sec-passo5" style="display: none;">
        <div id="campo-resumo">
            <h3>RESUMO DO PEDIDO</h3>
            <div class="resultado-grid">
                <div class="card-info"><label>DIST√ÇNCIA</label><span id="distancia">0.00 <small>KM</small></span></div>
                <div class="card-info"><label>VALOR TOTAL</label><span id="valor" class="valor-destaque">R$ 0,00</span></div>
            </div>
            <div class="bairro-tempo-display">
                <div class="info-item"><span class="info-text-label">üèòÔ∏è Bairro de Destino</span><span class="info-value" id="res-bairro">---</span></div>
                <div class="info-item"><span class="info-text-label">‚è±Ô∏è Tempo de Viagem</span><span class="info-value" id="res-tempo">---</span></div>
            </div>
            <div id="aviso-taxa">‚ö†Ô∏è TAXA M√çNIMA APLICADA</div>
        </div>

        <div class="box-section" style="margin-top: 20px;">
            <label style="text-align: center;">üè† TIPO DE LOCAL DE ENTREGA</label>
            <div class="tipo-residencia">
                <button class="btn-selecao" id="btn-casa" onclick="selecionarTipo('casa')">üè† CASA</button>
                <button class="btn-selecao" id="btn-apto" onclick="selecionarTipo('apto')">üè¢ APTO</button>
            </div>
            
            <div id="dados-apto" style="display: none; margin-top: 15px;">
                <div><label>BLOCO</label><input type="text" id="bloco" placeholder="Ex: B"></div>
                <div><label>APTO</label><input type="text" id="apto" placeholder="Ex: 101"></div>
            </div>
        </div>

        <button class="btn-whatsapp" onclick="prepararEnvio()" style="margin-top: 20px;">üì± ENVIAR PEDIDO P/ WHATSAPP</button>
    </div>
</div>

<div id="modalExpediente" class="modal-overlay">
    <div class="msg-box">
        <h2>‚ö†Ô∏è ATEN√á√ÉO</h2>
        <p>A solicita√ß√£o ser√° enviada para o WhatsApp do Lucas para an√°lise de disponibilidade.</p>
        <button class="btn-primary" onclick="continuarCalculo()">‚úÖ OK, CONTINUAR</button>
        <button class="btn-voltar" onclick="fecharModalExpediente()">CANCELAR</button>
    </div>
</div>

<div id="avisoLucas" class="modal-overlay">
    <div class="msg-box">
        <h2>TUDO CERTO!</h2>
        <p>Deseja enviar os dados do pedido para o WhatsApp?</p>
        <button class="btn-whatsapp" onclick="finalizarEnvio()">‚úÖ SIM, ENVIAR AGORA</button>
        <button class="btn-voltar" onclick="fecharModal()">VOLTAR</button>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
<script src="script.js?v=7"></script>
</body>
</html>
