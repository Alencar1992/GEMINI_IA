<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üèçüí® ALENCAR FRETES</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="style.css?v=12" />
</head>
<body>

<div class="header-top">
    <div class="logo-container"><img src="logo-cowboy-motofrete.png" alt="Logo Alencar Fretes" onerror="this.style.display='none'"></div>
    <div class="header-title"><h1>ALENCAR FRETES</h1></div>
</div>

<div class="container">
    <div class="row-endereco-num">
        <div><label>üìÖ DATA DA ENTREGA</label><input type="date" id="data_entrega"></div>
        <div><label>‚è∞ HOR√ÅRIO</label><input type="time" id="hora_entrega"></div>
    </div>
    
    <div><label>üë§ NOME DO CLIENTE</label><input type="text" id="nome_cliente" placeholder="Nome completo"></div>
    
    <div class="box-destaque">
        <label style="text-align: center; font-size: 0.9em;">üìç COMO DESEJA INFORMAR O ENDERE√áO?</label>
        <div class="tipo-busca">
            <button class="btn-selecao" id="btn-por-cep" onclick="selecionarBusca('cep')">Por CEP</button>
            <button class="btn-selecao" id="btn-por-rua" onclick="selecionarBusca('rua')">Nome da Rua</button>
        </div>
    </div>

    <div id="campo-cep" style="display: none;">
        <div class="row-endereco-num">
            <div><label>üìÆ CEP</label><input type="text" id="cep" placeholder="00000-000" onblur="buscarCep()"></div>
            <div><label>N¬∫</label><input type="text" id="num_residencia_cep" placeholder="Ex: 123"></div>
        </div>
        <div><label>üìç RUA</label><input type="text" id="rua_pelo_cep" placeholder="A rua aparecer√° aqui..." readonly></div>
    </div>

    <div id="campo-rua" style="display: none;">
        <div class="row-endereco-num">
            <div style="position: relative;">
                <label>üìç RUA OU AVENIDA</label>
                <input type="text" id="destino" placeholder="Comece a digitar..." oninput="sugerirEndereco(this.value)" autocomplete="off">
                <div id="lista-sugestoes" class="autocomplete-lista"></div>
            </div>
            <div><label>N¬∫</label><input type="text" id="num_residencia" placeholder="Ex: 123"></div>
        </div>
    </div>

    <div><label>üö© PONTO DE REFER√äNCIA (Opcional)</label><input type="text" id="ponto_referencia" placeholder="Ex: Pr√≥ximo ao mercado..."></div>
    
    <div class="botoes-acao">
        <button class="btn-3d-green" id="btn-calcular" onclick="validarExpediente()">üöÄ CALCULAR O FRETE</button>
        <button class="btn-clear" onclick="limpar()">üßπ Limpar Campos</button>
    </div>

    <div id="campo-resumo" style="display: none;">
        <h3 class="titulo-neon">RESUMO DO PEDIDO</h3>
        
        <div class="resultado-grid">
            <div class="card-info-3d">
                <label>DIST√ÇNCIA</label>
                <span id="distancia">0.00 <small style="font-size: 0.5em;">KM</small></span>
            </div>
            <div class="card-info-3d">
                <label>VALOR TOTAL</label>
                <span id="valor" class="valor-destaque">R$ 0,00</span>
            </div>
        </div>
        
        <div class="bairro-tempo-display">
            <div class="info-item">
                <span class="info-text-label">üèòÔ∏è Bairro de Destino</span>
                <span class="info-value-neon" id="res-bairro">---</span>
            </div>
            <div class="info-item">
                <span class="info-text-label">‚è±Ô∏è Tempo de Viagem</span>
                <span class="info-value-neon" id="res-tempo">---</span>
            </div>
        </div>
        
        <div id="aviso-taxa">‚ö†Ô∏è TAXA M√çNIMA APLICADA ‚úÖ</div>

        <div id="mapa-container" style="margin-top: 20px; border-radius: 15px; overflow: hidden; border: 2px solid var(--azul-3d); box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);">
            <div id="map"></div>
        </div>
    </div>

    <div class="box-destaque" id="sec-tipo-local" style="display: none; margin-top: 15px;">
        <label style="text-align: center;">üè† TIPO DE LOCAL DE ENTREGA</label>
        <div class="tipo-residencia">
            <button class="btn-selecao" id="btn-casa" onclick="selecionarTipo('casa')">üè† CASA</button>
            <button class="btn-selecao" id="btn-apto" onclick="selecionarTipo('apto')">üè¢ APTO</button>
        </div>
        
        <div id="dados-apto" style="display: none; margin-top: 15px;">
            <div class="row-endereco-num">
                <div><label>BLOCO</label><input type="text" id="bloco" placeholder="Ex: B"></div>
                <div><label>APTO</label><input type="text" id="apto" placeholder="Ex: 101"></div>
            </div>
        </div>

        <button class="btn-whatsapp-3d" onclick="prepararEnvio()" style="margin-top: 20px;">üì± ENVIAR PEDIDO P/ WHATSAPP</button>
    </div>
</div>

<div id="modalExpediente" class="modal-overlay">
    <div class="msg-box">
        <h2 style="color: #f1c40f;">‚ö†Ô∏è ATEN√á√ÉO</h2>
        <p>A solicita√ß√£o ser√° enviada para o WhatsApp do Lucas para an√°lise de disponibilidade.</p>
        <button class="btn-3d-green" onclick="continuarCalculo()">‚úÖ OK, CONTINUAR</button>
        <button class="btn-voltar" onclick="fecharModalExpediente()">CANCELAR</button>
    </div>
</div>

<div id="avisoLucas" class="modal-overlay">
    <div class="msg-box">
        <h2 style="color: var(--verde-frete);">TUDO CERTO!</h2>
        <p>Deseja enviar os dados do pedido para o WhatsApp?</p>
        <button class="btn-whatsapp-3d" onclick="finalizarEnvio()">‚úÖ SIM, ENVIAR AGORA</button>
        <button class="btn-voltar" onclick="fecharModal()">VOLTAR</button>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
<script src="script.js?v=13"></script>
</body>
</html>
